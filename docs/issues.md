### 1、login页
#### 登陆分4种情况
* 没有输入用户账户的，直接以非注册用户登陆，进入首页。然后可以在远程服务/区块链服务中登陆或者注册。
* 输入用户账户是邮箱地址的，验证远程服务登陆（默认取第一条服务器地址），进入首页，在state.home.user中记录登陆账户，可以直接使用远程服务
* 输入用户账户是asch口令的，验证区块链服务登陆（默认取第一条服务器地址），进入首页，在state.home中记录登陆账户，可以直接使用区块链服务
* 用户账户验证失败的，提示登陆失败，留在登录页。用户可以清空输入框，以非注册用户登陆。
#### 没有注册按钮
* 登陆页没有注册按钮，先以未注册用户登陆，然后去远程服务/区块链服务中注册。

### 2、home页
#### 各种使用场景
* 完成某项功能：新建文档、导入数据、注册用户、使用图表、等等
* 某类用户的工作：病案室、统计室、信息科、医务科、等等
* 
### 3、edit页
#### 文件路径说明
* clinet-data/system 系统配置文件，不提供edit页的编辑功能，一般用户不需要修改，高级用户如果要修改，就自己用其他编辑工具打开，比如修改服务器地址
* clinet-data/ 用户要导入的文件（数据分析文件/术语字典文件），在《系统服务-本地文件导入》中读取使用
* clinet-data/compare 用户要导入的文件字段与数据表字段的对照文件，在《系统服务-本地文件导入-对照数据》时生成，供《系统服务-本地文件导入-对照数据/校验数据/导入数据》时使用
* clinet-data/loaded 用户完成导入的原文件的备份，用户导入文件完成后，将clinet-data/下的原文件复制到此目录，并删除clinet-data/下的原文件
* clinet-data/stat 数据分析文件，在《数据分析-本地文件》中读取使用，用户导入文件完成后，如果是数据分析文件，就将导入后文件保存到此目录
* clinet-data/library 术语字典文件，在《术语字典-本地文件》中读取使用，用户导入文件完成后，如果是术语字段文件，就将导入后文件保存到此目录
* clinet-data/user 用户生成的CDA文件，在《数据采集-本地》中读取使用
* * edit页右工具栏的《新文件》是以当天日期为文件名，新建一个CDA文件，保存在此目录
* * 用户可以直接拷贝CDA文件到此目录，不需要导入（CDA文件没有header，每条记录自己就是key-value的） 

####  《编辑数据》功能
* 《数据采集-本地》的读取目录是clinet-data/user，并且只读取该目录下的CDA文件，不读取其他文件
* 在《数据分析-本地文件》和《术语字典-本地文件》和《系统服务-本地文件导入》的工具栏中有《编辑数据》的功能按钮，点击后跳转到edit页，《数据采集-本地》的读取目录就改为相应的clinet-data/stat、clinet-data/library、clinet-data/，并且只读取该目录下的CSV文件，不读取其他文件
* 点击《数据采集-本地》的左工具栏的《返回》后，则返回相应页，并将《数据采集-本地》的读取目录重置为clinet-data/user，并且只读取该目录下的CDA文件，不读取其他文件
* clinet-data/system、clinet-data/compare、clinet-data/loaded 目录下的文件不提供数据编辑功能，高级用户可以自己用其他编辑工具打开

#### 左工具栏的《选择》是选择病案模板，病案模板文件是hitb_model.cda，保存在clinet-data/system目录下，系统启动时读取

#### 左工具栏的《新建》是使用选定模板，在state.edit.doc中保存，在左页显示

#### 左工具栏的《保存》是将当前state.edit.doc中保存的文档，保存到state.edit.file/远程服务中
* 如果是本地，是用doc替换file中的对应行记录，file.splice(docIndex,1,doc)
* 如果是远程，是调用远程API，将doc保存到数据库

#### 左工具栏的《另存》是将当前state.edit.doc中保存的文档，保存到state.edit.file/远程服务中
* 如果是本地，是用doc添加到file中，file.push(doc)
* 如果是远程，是调用远程API，将doc保存到数据库

#### 左工具栏的《删除》是将当前state.edit.doc中保存的文档，从state.edit.file中删除
* 如果是本地，是用doc从file中删除，file.splice(docIndex,1)
* 如果是远程，是调用远程API，将doc从数据库中标记删除（以后在用数据库定时任务彻底删除）

#### 左工具栏的《写文件》是将当前file保存到文件中，用file重写本地文件

#### 左工具栏的《前页》《后页》是在左页是列表（state.edit.file）时，用于翻页

#### 左工具栏的《search》是在左页显示内容中查询（state.edit.file 或 state.edit.doc ）

#### 右工具栏的《选择》是选择右页显示的《帮助》类型。

#### 右工具栏的《帮助》是显示帮助页面

#### 右工具栏的《本地》是打开一个本地文件列表（state.edit.files）
* 默认是clinet-data/user目录下的CDA文件
* 从《数据分析》《术语字典》《系统服务-本地文件导入》中点击《编辑数据》跳转过来，则是相应目录下的CSV文件

#### 右工具栏的《远程》是调用远程服务API，同样分为三种user、stat、library

#### 右工具栏的《CDA》按钮去掉，不要了

#### 右工具栏的《新文件》是在clinet-data/user 目录下，以当天日期为文件名，新建一个CDA文件。如果该文件存在，则不新建。

#### 右工具栏的《前页》《后页》是在右页是列表（state.edit.files 或 state.edit.file ）时，用于翻页

#### 右工具栏的《search》是在右页显示内容中查询（state.edit.files 或 state.edit.file 或 帮助 ）

#### 左页包括列表显示/文档编辑显示

#### 右页包括列表显示/文档帮助显示

#### 底部输入框
* 空格，用于分隔item
* 左、右移动键，用于输入框中移动鼠标位置
* 回车键，用于提交，将当前输入框内容更新到state.edit.doc，然后清空输入框
* 上、下移动键，用于在左页文档中移动鼠标位置
* ctrl + 上、下移动键，仅用于CDA文件，用于在左页文档中移动item位置
* ctrl + 0键（小键盘），仅用于CDA文件，用于在底部提示框中前翻页
* ctrl + .键（小键盘），仅用于CDA文件，用于在底部提示框中后翻页
* ctrl + 1-9键（小键盘），仅用于CDA文件，用于在底部提示框中选择对应项输入

#### 底部提示框，根据当前输入内容显示

#### 右页帮助，根据当前文档/输入内容显示

### 4、数据分析
#### 《本地文件》，打开clinet-data/stat目录下的CSV文件（state.stat.files），显示在左列表中

#### 《远程文件》，调用远程服务的API，显示在左列表中

#### 点击左列表，在下面的table中显示（state.stat.file）

#### table中操作，包括行点击、列点击
* 在行中任一位置点击，则选中行（不包括第一行，第一行总是表头，不可选中）
* 在第一行（表头）中任一位置点击，则选中列（包括第一行）
* 选中行/选中列时，刷新上面的chart图

#### 《前页》《后页》
* 当前焦点在左列表时，state.stat.files的翻页
* 当前焦点在下table时，state.stat.file的翻页

#### 《编辑数据》，跳转到edit页，并将edit的本地目录设置为clinet-data/stat

#### 《加入对比》，将当前选中的行和列保存到临时表中（state.stat.table），多次点击，则多次添加
* 此处算法待补充

#### 《显示对比》，将state.stat.table显示在下table中，替代state.stat.file，并刷新chart图

#### 《保存对比》，在clinet-data/stat目录下，新建CSV文件（文件名默认取当前时间），保存state.stat.table，如果是远程，则调用远程服务API保存到数据库

#### 《左图选择》《右图选择》，选中echart样式，并填充数据
* 此处算法待补充

#### 《维度选择》包括《机构》《时间》《病种》《自定义维度》，在左列表显示，点击后，在下table中filter
* 自定义维度，是以当前选择列作为维度，将当前选择列的distinct值作为维度值

### 5、术语字典(功能参照上面的数据分析)

### 6、系统服务
#### 本地文件导入
##### 选择CSV文件
* 读取clinet-data/目录下，用户放置的CSV文件目录，在左列表中显示（state.system.files）
* 点击左列表，在table中显示一个CSV文件的内容（state.system.file），因为用户导入文件的字段可能很多，所以只显示前10个字段，点击工具栏的《前翻》《后翻》，可以显示后10个字段
* 
##### 选择数据表
* 读取全局变量global.hitbdata.table，显示在左列表中
* 点击左列表，在table中显示当前选择表的字段

##### 对照数据
* 左列表中显示刚才选择的导入文件的字段，table中显示要导入表的字段
* 在table中点击选择行（选择表字段）
* 在左列表中点击选择导入文件的字段，将该字段加入到table行的末尾

##### 校验数据
* table中保留加入字段的行，去掉其他行
* map逐行读取导入文件，用表字段的数据类型和约束条件，校验对应列的数据，将校验结果附加到每行的末尾
* reduce汇总校验结果，将校验结果加入到table行的末尾
* 将该文件覆盖写入

##### 编辑数据，跳转到edit页

##### 导入数据
* map读取校验通过的行，依据导入表的类型（stat或library）写入到clinet-data/stat 或 clinet-data/library 目录下
* 将原文件转移到clinet-data/loaded 目录下

##### 保存本地文件（此按钮去掉，不要了）

##### 上传服务器数据，调用服务器API，将刚才导入的数据上传到服务器


#### 远程服务器设置
##### 远程服务器列表
* 显示服务器列表
* 服务器登陆用户，已登陆服务器显示连接成功状态
* 点击列表中服务器，测试连接是否成功
* 如果连接成功，如果不是原登陆服务器，则用户登陆状态注销，底部提示框显示：未注册用户登陆

##### 用户设置
* 连接服务器成功后，显示用户登陆页面
* 用户登陆成功后，显示用户信息页面

##### 机构设置
* 用户自定义用户组，可以是科室

##### 人员设置
* 用户自定义操作人员，这里注册的操作人员，同样可以登陆服务器，与用户共享同一份数据，操作权限暂时不区分

##### 服务器功能设置
* 显示服务器功能列表，先不做设置，未来可以设置机构-人员的操作权限

#### DRG分组服务
##### 本地病案数据
* 读取clinet-data/stat目录下的以wt4开头的CSV文件目录，显示在左列表
* 点击左列表，读入state.system.wt4，显示在table中

##### 服务器病案数据，调用服务器API，获取该用户的wt4数据

##### 校验数据（此按钮去掉，不要了）

##### 调用drg分组服务，逐条调用服务器API
* 服务器上不保留数据
* 获取分组结果，并添加到逐条的末尾，显示在table中

##### 停止drg分组服务，停止调用服务器API

##### 查看drg分组规则
* 默认显示mdc，点击进入adrg，再点击进入drg，显示drg分组规则
* 在病案数据中选中某条时，显示该条返回的drg的分组规则

#### DRG分析服务（只能在服务器上做，因此只能使用服务器上的数据）
##### 服务器病案数据，调用服务器API，获取该用户的wt4数据

##### 选中分析指标
* 显示分析指标的列表，供用户勾选

##### 选中分析维度（机构-时间-病种）
* 显示分析维度的列表，供用户勾选

##### 开始计算
* 显示当前计算进度（就是把log输出）

### 7、区块链服务
#### 服务器节点设置
#####  服务器节点列表
* 显示服务器列表
* 区块链登陆用户，已登陆服务器显示连接成功状态
* 点击列表中服务器，测试连接是否成功
* 如果连接成功，如果不是原登陆服务器，则用户登陆状态注销，底部提示框显示：未注册用户登陆

##### 显示连接节点
* 获取全部节点peers

##### 区块链服务功能介绍（文字说明）

##### 区块链服务功能列表（DAPP功能列表）

#### 账户设置
##### 账户设置
* 连接服务器成功后，显示用户登陆页面（asch登陆页面）
* 用户登陆成功后，显示用户信息页面（asch用户页面）

##### 账户余额
* 用户在asch主链和各个侧链的账户余额

##### 转账交易
* 用户在asch主链和各个侧链的转账交易页面

##### 账户交易记录
* 用户在asch主链和各个侧链的账户交易记录

#### 区块查询
##### 区块列表

##### 区块内容

##### 区块内容明细
* 用户上传的数据

#### DRG分组服务

#### DRG分析服务
